/**
 * @file Generated by er-sync
 * @author killeryyl<longgeyang@jesgoo.com>
 * @date Wed Nov 25 2015 16:52:52 GMT+0800 (CST)
 * Copyright (c) 2015 jesgoo.com, Inc. All Rights Reserved
 */
(function () {
    var FIELDS = function (model) {
        return [];
    };
    mf.index.account.model.index = new er.Model({
        QUERY_MAP: {},
        LOADER_LIST: ['modelLoader'],
        modelLoader: new er.Model.Loader(function () {
            console.log('modelLoader');
            var loader = this;
            loader.stop();
            mf.parallelAjax([
                {
                    url: '/config',
                    cache: true
                },
                '/plan',
                '/idea',
                '/user'
            ], function (config, plans, ideas, user) {
                loader.set('config', config);
                user.balance /= 1000;
                user.coupon /= 1000;
                loader.set('plansCount', (plans.length).toString(10));
                loader.set('ideasCount', (ideas.length).toString(10));
                loader.set('plansValidCount', (plans.filter(function (n) {
                    return n.status === config.maps.planStatusType.valid;
                }).length).toString(10));
                loader.set('ideasValidCount', (ideas.filter(function (n) {
                    return n.status === config.maps.unitStatusType.valid;
                }).length).toString(10));
                loader.set('balance', mf.getFieldContentMoney('balance')(user));
                loader.set('coupon', mf.getFieldContentMoney('coupon')(user));
                loader.start();
            });
        })
    });
})();